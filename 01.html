<!doctype html>
<html lang="ko">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>효원(曉原) 미식회</title>

  <!-- Tailwind CDN -->
  <script src="https://cdn.tailwindcss.com"></script>

  <!-- Lucide CDN -->
  <script src="https://unpkg.com/lucide@latest"></script>

  <style>
    /* tailwind line-clamp 대체(간단 버전) */
    .line-clamp-3{
      display: -webkit-box;
      -webkit-line-clamp: 3;
      -webkit-box-orient: vertical;
      overflow: hidden;
    }
  </style>
</head>

<body class="min-h-screen bg-[#050a12] font-sans text-slate-200">
  <div id="app"></div>

  <script>
    // -----------------------------
    // Data
    // -----------------------------
    const restaurantsData = [
      { id: 1, name: "톤쇼우 부산대점", type: "돈카츠", menu: "버크셔K 로스카츠", rating: 4.8, address: "부산 금정구 금강로 247-10", description: "설명이 필요 없는 부산 대표 돈카츠. 핑크빛 육즙과 숯불향이 특징.", tags: ["인생카츠", "웨이팅필수"], review: "인생 돈카츠를 만났습니다. 부드러움이 차원이 달라요.", image: "https://images.unsplash.com/photo-1546069901-ba9599a7e63c?auto=format&fit=crop&q=80&w=800" },
      { id: 2, name: "포맨티코 본점", type: "베트남음식", menu: "사골 쌀국수", rating: 4.7, address: "부산 금정구 장전온천천로 79", description: "유럽풍 인테리어에서 즐기는 깊은 육수의 쌀국수. 데이트 명소.", tags: ["분위기", "사골육수"], review: "쌀국수 국물이 정말 깊고 진해요. 인테리어도 너무 예쁩니다.", image: "https://images.unsplash.com/photo-1582878826629-29b7ad1ccd63?auto=format&fit=crop&q=80&w=800" },
      { id: 3, name: "뉴숯불통닭 본점", type: "치킨", menu: "가마솥 후라이드", rating: 4.7, address: "부산 금정구 구서로 7", description: "부산 3대 통닭. 카레향 베이스의 바삭한 가마솥 치킨.", tags: ["노포", "카레향"], review: "바삭함의 끝판왕입니다. 카레향이 신의 한 수예요.", image: "https://images.unsplash.com/photo-1562967914-6c82c6c2a795?auto=format&fit=crop&q=80&w=800" },
      { id: 4, name: "수림식당 본점", type: "중식/면", menu: "가지만두, 탄탄면", rating: 4.6, address: "부산 금정구 금샘로 7", description: "가지만두 신드롬의 주인공. 탄탄면과의 조합이 일품.", tags: ["가지만두", "탄탄면"], review: "가지만두는 무조건 드셔야 합니다. 육즙이 팡팡 터져요.", image: "https://images.unsplash.com/photo-1585032226651-759b368d7246?auto=format&fit=crop&q=80&w=800" },
      { id: 5, name: "서문국수", type: "국수", menu: "비빔국수, 감태주먹밥", rating: 4.6, address: "부산 금정구 장전온천천로 51", description: "부산대역 1번 출구 가성비 끝판왕. 신선한 채소와 감태의 만남.", tags: ["가성비", "감태주먹밥"], review: "야외 평상에서 먹는 국수 맛이 최고입니다. 감태주먹밥 필수!", image: "https://images.unsplash.com/photo-1569718212165-3a8278d5f624?auto=format&fit=crop&q=80&w=800" },
      { id: 6, name: "에타리", type: "디저트/타르트", rating: 4.6, address: "부산 금정구 장전온천천로 73", description: "에그타르트 성지. 바삭한 파이지와 부드러운 필링.", tags: ["에그타르트", "웨이팅"], review: "포르투갈에서 먹었던 맛보다 맛있어요. 선물용으로도 최고.", image: "https://images.unsplash.com/photo-1509365465985-25d11c17e812?auto=format&fit=crop&q=80&w=800" },
      { id: 7, name: "구본", type: "돈카츠", menu: "특등심 돈카츠", rating: 4.6, address: "부산 금정구 부산대학로64번길 6", description: "톤쇼우와는 또 다른 매력의 프리미엄 카츠. 육향이 진함.", tags: ["프리미엄", "육향"], review: "고기 본연의 맛을 가장 잘 살린 돈카츠 집입니다.", image: "https://images.unsplash.com/photo-1591814468924-cafb5d1232e1?auto=format&fit=crop&q=80&w=800" },
      { id: 8, name: "도야지면옥", type: "국수/국밥", menu: "고기국수, 돔베수육", rating: 4.5, address: "부산 금정구 장전온천천로 39", description: "진한 사골 육수의 국수와 마늘 순대가 별미인 곳.", tags: ["든든함", "마늘순대"], review: "마늘순대가 정말 특이하고 맛있어요. 국물도 아주 진합니다.", image: "https://images.unsplash.com/photo-1547592166-23ac45744acd?auto=format&fit=crop&q=80&w=800" },
      { id: 9, name: "카오카무", type: "태국음식", menu: "족발밥(카오카무)", rating: 4.5, address: "부산 금정구 장전온천천로83번길 9", description: "야들야들한 족발과 공심채 볶음으로 태국 현지의 맛을 재현.", tags: ["족발밥", "태국현지맛"], review: "방콕에서 먹던 족발밥 맛 그대로네요. 너무 부드러워요.", image: "https://images.unsplash.com/photo-1562967962-ccd36709849c?auto=format&fit=crop&q=80&w=800" },
      { id: 10, name: "코하루", type: "라멘", menu: "하카타 돈코츠라멘", rating: 4.5, address: "부산 금정구 부산대학로38번길 16", description: "진하고 구수한 국물의 돈코츠 라멘 전문점. 차슈가 일품.", tags: ["라멘", "차슈맛집"], review: "부산대 라멘 하면 코하루죠. 차슈 추가는 선택이 아닌 필수.", image: "https://images.unsplash.com/photo-1552611052-33e04de081de?auto=format&fit=crop&q=80&w=800" },
      { id: 11, name: "라라관", type: "사천요리", menu: "마라훠궈전골", rating: 4.5, address: "부산 금정구 부산대학로 49-1", description: "부산 마라 열풍의 근원지. 얼얼한 사천식 화끈한 맛.", tags: ["마라탕", "사천식"], review: "진짜 마라를 느끼고 싶다면 여기로 오세요. 중독성 대박.", image: "https://images.unsplash.com/photo-1555126634-323283e090fa?auto=format&fit=crop&q=80&w=800" },
      { id: 12, name: "비비비 (BBB)", type: "버거", menu: "수제버거", rating: 4.5, address: "부산 금정구 장전온천천로 77", description: "육즙 가득한 패티와 직접 구운 번의 조화가 환상적.", tags: ["수제버거", "힙한분위기"], review: "번이 정말 쫄깃하고 패티 육즙이 장난 아닙니다.", image: "https://images.unsplash.com/photo-1568901346375-23c9450c58cd?auto=format&fit=crop&q=80&w=800" },
      { id: 13, name: "자마미등갈비", type: "등갈비", rating: 4.5, address: "부산 금정구 금강로 248-5", description: "숙성된 등갈비 구이. 매콤 달콤한 양념이 매력적.", tags: ["등갈비", "술안주"], review: "양념이 정말 맛있어서 밥까지 비벼 먹게 됩니다.", image: "https://images.unsplash.com/photo-1544025162-d76694265947?auto=format&fit=crop&q=80&w=800" },
      { id: 14, name: "텐동코하루", type: "텐동", menu: "모듬 텐동", rating: 4.5, address: "부산 금정구 장전온천천로 43", description: "라멘 맛집 코하루에서 운영하는 텐동집. 튀김 퀄리티 보장.", tags: ["텐동", "바삭튀김"], review: "튀김옷이 얇고 정말 바삭해요. 소스가 짜지 않아 좋습니다.", image: "https://images.unsplash.com/photo-1512621776951-a57141f2eefd?auto=format&fit=crop&q=80&w=800" },
      { id: 15, name: "해쉬 (Hash)", type: "양식", menu: "목살 플레이트", rating: 4.4, address: "부산 금정구 금강로 248-11", description: "넉넉한 양과 활기찬 분위기. 학생들에게 사랑받는 양식당.", tags: ["목살플레이트", "대학가감성"], review: "목살 플레이트 구성이 너무 알차요. 치즈 크래커도 꿀맛.", image: "https://images.unsplash.com/photo-1558030006-45c2550da83c?auto=format&fit=crop&q=80&w=800" },
      { id: 16, name: "나오리쇼쿠", type: "일식가정식", menu: "오차즈케", rating: 4.4, address: "부산 금정구 금강로 271-14", description: "정갈한 일본식 오차즈케 한 상. 깔끔한 혼밥으로도 추천.", tags: ["오차즈케", "혼밥추천"], review: "깔끔하게 한 끼 먹기 가장 좋은 곳입니다. 가라아게도 맛있어요.", image: "https://images.unsplash.com/photo-1553621042-f6e147245754?auto=format&fit=crop&q=80&w=800" },
      { id: 17, name: "부산댁", type: "고기집", menu: "구워주는 삼겹살", rating: 4.4, address: "부산 금정구 부산대학로50번길 12", description: "전문가가 구워서 내어주는 편안하고 맛있는 고기집.", tags: ["구워주는집", "회식추천"], review: "구워져서 나오니까 먹기만 하면 돼서 너무 편해요. 고기 질도 굿.", image: "https://images.unsplash.com/photo-1606416132922-309495729e1f?auto=format&fit=crop&q=80&w=800" },
      { id: 18, name: "카메", type: "일식당", menu: "사케동, 덮밥", rating: 4.4, address: "부산 금정구 금강로 271-4", description: "신선한 연어 덮밥과 정성 가득한 일식 덮밥 전문점.", tags: ["사케동", "연어"], review: "연어가 정말 두툼하고 신선합니다. 간장 소스도 짜지 않아요.", image: "https://images.unsplash.com/photo-1579584425555-c3ce17fd3b11?auto=format&fit=crop&q=80&w=800" },
      { id: 19, name: "야마벤또", type: "벤또", menu: "도리벤또", rating: 4.4, address: "부산 금정구 금강로 256", description: "푸짐한 구성의 일본식 도시락. 갓 튀긴 튀김들이 포인트.", tags: ["벤또", "푸짐함"], review: "대학생 때부터 가던 단골집. 양이 정말 푸짐해서 좋아요.", image: "https://images.unsplash.com/photo-1559339352-11d035aa65de?auto=format&fit=crop&q=80&w=800" },
      { id: 20, name: "팔팔탕수육", type: "탕수육전문", rating: 4.4, address: "부산 금정구 부산대학로63번길 21", description: "탕수육 하나로 승부하는 집. 바삭한 식감이 일품.", tags: ["탕수육", "바삭함"], review: "탕수육 전문점답게 튀김 공력이 대단합니다. 가성비 최고.", image: "https://images.unsplash.com/photo-1525755662778-989d0524087e?auto=format&fit=crop&q=80&w=800" },
      { id: 21, name: "식보 (SIKBO)", type: "아시안퓨전", menu: "덮밥류", rating: 4.4, address: "부산 금정구 부산대학로 34-1", description: "트렌디한 인테리어와 깔끔한 아시안 퓨전 덮밥 전문점.", tags: ["트렌디", "인스타감성"], review: "가게가 너무 힙하고 음식 플레이팅도 예뻐서 사진 찍기 좋아요.", image: "https://images.unsplash.com/photo-1512621776951-a57141f2eefd?auto=format&fit=crop&q=80&w=800" },
      { id: 22, name: "델라고", type: "이탈리안", menu: "빠네 파스타", rating: 4.3, address: "부산 금정구 부산대학로 64", description: "부산대 정문 앞 터줏대감. 스테디셀러 파스타와 화덕피자.", tags: ["스테디셀러", "정문앞"], review: "빠네 파스타는 언제 먹어도 맛있네요. 정문 앞이라 가기도 편해요.", image: "https://images.unsplash.com/photo-1572441713132-c542fc4fe282?auto=format&fit=crop&q=80&w=800" },
      { id: 23, name: "설봉돼지국밥", type: "돼지국밥", rating: 4.3, address: "부산 금정구 금정로 94", description: "잡내 없이 깔끔하고 진한 육수. 부산대 로컬들의 국밥 픽.", tags: ["해장", "로컬푸드"], review: "국물이 정말 깔끔합니다. 깍두기와의 조합이 예술이에요.", image: "https://images.unsplash.com/photo-1628160301413-2196656ca8a1?auto=format&fit=crop&q=80&w=800" },
      { id: 24, name: "우마이도", type: "라멘", menu: "돈코츠 라멘", rating: 4.3, address: "부산 금정구 금강로 247-5", description: "오랜 시간 자리를 지켜온 정통 하카타 식 라멘 맛집.", tags: ["정통파", "자가제면"], review: "면발의 식감이 아주 좋습니다. 정통 라멘을 원한다면 여기.", image: "https://images.unsplash.com/photo-1591814468924-cafb5d1232e1?auto=format&fit=crop&q=80&w=800" },
      { id: 25, name: "안다미로", type: "이탈리안", menu: "파스타", rating: 4.3, address: "부산 금정구 금강로279번길 8", description: "아늑한 분위기에서 즐기는 정성 가득한 파스타와 리조또.", tags: ["아늑함", "정성"], review: "사장님이 정말 친절하시고 파스타 소스가 아주 진해요.", image: "https://images.unsplash.com/photo-1551183053-bf91a1d81141?auto=format&fit=crop&q=80&w=800" },
      { id: 26, name: "퍼스트부엌", type: "퓨전레스토랑", menu: "태국식 커리, 파스타", rating: 4.2, address: "부산 금정구 장전온천천로 113", description: "동남아와 이탈리안의 조화. 독특하고 세련된 메뉴 구성.", tags: ["퓨전", "색다른맛"], review: "똠얌꿍 파스타처럼 신선한 메뉴가 많아서 좋아요.", image: "https://images.unsplash.com/photo-1559847844-5315695dadae?auto=format&fit=crop&q=80&w=800" },
      { id: 27, name: "신창국밥", type: "돼지국밥", rating: 4.2, address: "부산 금정구 부산대학로 50", description: "맑은 국물 스타일의 돼지국밥. 담백한 맛을 선호한다면 추천.", tags: ["맑은국물", "담백"], review: "맑은 국물이라 먹고 나서 속이 정말 편안합니다.", image: "https://images.unsplash.com/photo-1628160301413-2196656ca8a1?auto=format&fit=crop&q=80&w=800" },
      { id: 28, name: "곁집", type: "비빔밥/찌개", rating: 4.2, address: "부산 금정구 장전온천천로 51", description: "돌솥비빔밥과 김치찌개의 정겨운 한 상 차림.", tags: ["한식", "돌솥밥"], review: "든든하게 한식 먹고 싶을 때 가장 먼저 생각나는 곳.", image: "https://images.unsplash.com/photo-1490645935967-10de6ba17061?auto=format&fit=crop&q=80&w=800" },
      { id: 29, name: "샤오시안", type: "중식", menu: "탕수육, 짬뽕", rating: 4.1, address: "부산 금정구 부산대학로50번길 16", description: "가성비 좋은 중식당. 저렴한 가격에 요리를 즐길 수 있는 곳.", tags: ["가성비중식", "요리맛집"], review: "짬뽕 국물이 시원하고 탕수육 가격이 정말 착합니다.", image: "https://images.unsplash.com/photo-1525755662778-989d0524087e?auto=format&fit=crop&q=80&w=800" },
      { id: 30, name: "모모스테이크", type: "스테이크", rating: 4.0, address: "부산 금정구 부산대학로 38", description: "젓가락으로 먹는 스테이크. 학생들의 꾸준한 사랑.", tags: ["가성비", "간편식"], review: "스테이크를 부담 없는 가격에 먹을 수 있어서 좋아요.", image: "https://images.unsplash.com/photo-1546241072-48010ad28c2c?auto=format&fit=crop&q=80&w=800" }
    ];

    // 평점 내림차순 정렬(React useMemo 대체)
    const sortedRestaurants = [...restaurantsData].sort((a, b) => b.rating - a.rating);

    // -----------------------------
    // State
    // -----------------------------
    const state = {
      searchTerm: "",
      selectedId: null
    };

    // -----------------------------
    // Utils
    // -----------------------------
    function escapeHtml(str) {
      return String(str)
        .replaceAll("&", "&amp;")
        .replaceAll("<", "&lt;")
        .replaceAll(">", "&gt;")
        .replaceAll('"', "&quot;")
        .replaceAll("'", "&#039;");
    }

    function handleOpenMap(address) {
      const query = encodeURIComponent(address);
      window.open(`https://map.kakao.com/link/search/${query}`, "_blank");
    }

    function matchesSearch(r, q) {
      if (!q) return true;
      const needle = q.trim().toLowerCase();
      if (!needle) return true;

      const inName = r.name.toLowerCase().includes(needle);
      const inType = r.type.toLowerCase().includes(needle);
      const inTags = (r.tags || []).some(t => String(t).toLowerCase().includes(needle));
      return inName || inType || inTags;
    }

    function getFiltered() {
      return sortedRestaurants.filter(r => matchesSearch(r, state.searchTerm));
    }

    function getSelectedRestaurant() {
      if (state.selectedId == null) return null;
      return sortedRestaurants.find(r => r.id === state.selectedId) || null;
    }

    // 별점(0~5) 렌더
    function renderStars(rating) {
      const filled = Math.floor(rating);
      let html = "";
      for (let i = 0; i < 5; i++) {
        const cls = i < filled ? "text-yellow-500 fill-yellow-500" : "text-slate-700";
        html += `<i data-lucide="star" class="${cls}" style="width:12px;height:12px"></i>`;
      }
      return html;
    }

    // -----------------------------
    // Render
    // -----------------------------
    const appEl = document.getElementById("app");

    function render() {
      const filtered = getFiltered();
      const selected = getSelectedRestaurant();

      appEl.innerHTML = `
        <div class="min-h-screen bg-[#050a12] font-sans text-slate-200">
          <!-- Navbar -->
          <nav class="sticky top-0 z-50 bg-[#0a192f]/90 backdrop-blur-md border-b border-[#c5a059]/20 px-6 py-4">
            <div class="max-w-7xl mx-auto flex justify-between items-center">
              <div class="flex items-center gap-3">
                <div class="bg-[#c5a059] p-1.5 rounded-lg shadow-[0_0_15px_rgba(197,160,89,0.3)]">
                  <i data-lucide="award" class="text-[#0a192f]" style="width:24px;height:24px"></i>
                </div>
                <h1 class="text-xl md:text-2xl font-black text-[#c5a059] tracking-tight">
                  효원(曉原) 미식회
                </h1>
              </div>

              <button
                data-action="go-home"
                class="group flex items-center gap-2 bg-slate-800/50 hover:bg-[#c5a059] transition-all px-4 py-2 rounded-full border border-slate-700 hover:border-[#c5a059]"
              >
                <i data-lucide="home" class="group-hover:text-[#0a192f]" style="width:18px;height:18px"></i>
                <span class="text-sm font-bold group-hover:text-[#0a192f] hidden sm:inline">Home</span>
              </button>
            </div>
          </nav>

          <!-- Hero -->
          <header class="relative py-20 px-6 overflow-hidden">
            <div class="max-w-5xl mx-auto text-center relative z-10">
              <div class="flex justify-center mb-6">
                <span class="bg-[#c5a059]/10 text-[#c5a059] px-4 py-1 rounded-full text-xs font-bold tracking-[0.2em] border border-[#c5a059]/30 uppercase">
                  Premier PNU Gourmet Guide
                </span>
              </div>
              <h2 class="text-5xl md:text-7xl font-black mb-8 text-white leading-tight">
                금정의 맛,<br />
                <span class="text-transparent bg-clip-text bg-gradient-to-r from-[#c5a059] to-[#f3d38c]">
                  효원의 자부심
                </span>
              </h2>

              <div class="relative max-w-2xl mx-auto mt-12">
                <i data-lucide="search" class="absolute left-6 top-1/2 -translate-y-1/2 text-[#c5a059]" style="width:22px;height:22px"></i>
                <input
                  id="searchInput"
                  type="text"
                  placeholder="음식 종류, 이름, 키워드로 검색..."
                  class="w-full bg-slate-900/80 border-2 border-slate-800 rounded-2xl py-5 px-16 focus:outline-none focus:border-[#c5a059] focus:ring-4 focus:ring-[#c5a059]/10 transition-all text-lg shadow-2xl text-white"
                  value="${escapeHtml(state.searchTerm)}"
                />
              </div>
            </div>

            <!-- Decorative Background -->
            <div class="absolute top-0 left-1/2 -translate-x-1/2 w-full h-full pointer-events-none">
              <div class="absolute top-10 left-1/4 w-64 h-64 bg-[#c5a059]/5 rounded-full blur-[120px]"></div>
              <div class="absolute bottom-10 right-1/4 w-96 h-96 bg-[#c5a059]/10 rounded-full blur-[150px]"></div>
            </div>
          </header>

          <!-- Main Content -->
          <main class="max-w-7xl mx-auto px-6 pb-32">
            <div class="flex flex-col md:flex-row justify-between items-end mb-12 gap-6">
              <div class="space-y-2">
                <h3 class="text-2xl font-bold text-white flex items-center gap-3">
                  <i data-lucide="flame" class="text-orange-500" style="width:28px;height:28px"></i>
                  검증된 로컬 맛집 <span class="text-[#c5a059]">TOP 30</span> (평점순)
                </h3>
                <p class="text-slate-500 font-medium">최고의 미식 경험을 제공하는 평점 높은 순으로 나열하였습니다.</p>
              </div>
              <div class="bg-slate-900 px-4 py-2 rounded-lg border border-slate-800 text-sm font-bold">
                검색 결과: <span class="text-[#c5a059]">${filtered.length}</span> 건
              </div>
            </div>

            ${
              filtered.length > 0
                ? `<div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-8">
                    ${filtered.map((res, index) => `
                      <div
                        class="group relative bg-[#0d1520] rounded-[2rem] p-8 border border-slate-800 hover:border-[#c5a059]/50 transition-all duration-500 shadow-sm hover:shadow-[0_20px_40px_rgba(0,0,0,0.4)] flex flex-col"
                      >
                        <!-- Ranking Badge -->
                        <div class="absolute -top-3 -left-3 w-10 h-10 bg-gradient-to-br from-[#c5a059] to-[#f3d38c] rounded-xl flex items-center justify-center font-black text-[#0a192f] shadow-lg z-10">
                          ${index + 1}
                        </div>

                        <!-- Card Badge -->
                        <div class="flex justify-between items-start mb-6">
                          <span class="bg-slate-800 text-slate-300 text-[10px] font-black px-3 py-1 rounded-full uppercase tracking-widest group-hover:bg-[#c5a059]/20 group-hover:text-[#c5a059] transition-colors ml-6">
                            ${escapeHtml(res.type)}
                          </span>
                          <div class="flex items-center gap-1.5 bg-black/40 px-3 py-1 rounded-full border border-slate-800">
                            <i data-lucide="star" class="text-yellow-500 fill-yellow-500" style="width:14px;height:14px"></i>
                            <span class="text-xs font-bold text-yellow-500">${res.rating.toFixed(1)}</span>
                          </div>
                        </div>

                        <!-- Card Content -->
                        <h4 class="text-2xl font-bold text-white mb-3 group-hover:text-[#c5a059] transition-colors">
                          ${escapeHtml(res.name)}
                        </h4>
                        <p class="text-slate-400 text-sm leading-relaxed mb-6 line-clamp-3">
                          ${escapeHtml(res.description)}
                        </p>

                        <div class="mt-auto space-y-6">
                          <div class="flex items-center gap-3 text-xs font-semibold text-slate-300">
                            <i data-lucide="utensils" class="text-[#c5a059]" style="width:16px;height:16px"></i>
                            <span>대표메뉴: ${escapeHtml(res.menu || "문의 요망")}</span>
                          </div>

                          <div class="flex flex-wrap gap-2">
                            ${(res.tags || []).map(tag =>
                              `<span class="text-[10px] text-[#c5a059] font-bold opacity-60">#${escapeHtml(tag)}</span>`
                            ).join("")}
                          </div>

                          <button
                            data-action="open-detail"
                            data-id="${res.id}"
                            class="w-full py-4 rounded-xl bg-slate-800 group-hover:bg-[#c5a059] text-white group-hover:text-[#0a192f] font-black text-sm transition-all flex items-center justify-center gap-2"
                          >
                            상세 가이드 보기
                            <i data-lucide="chevron-right" style="width:18px;height:18px"></i>
                          </button>
                        </div>
                      </div>
                    `).join("")}
                  </div>`
                : `<div class="text-center py-40 border-2 border-dashed border-slate-800 rounded-[3rem]">
                    <i data-lucide="info" class="mx-auto text-slate-700 mb-6" style="width:64px;height:64px"></i>
                    <h4 class="text-2xl font-bold text-slate-500 mb-2">찾으시는 맛집이 없습니다.</h4>
                    <p class="text-slate-600 font-medium">다른 검색어로 다시 시도해 보세요.</p>
                  </div>`
            }
          </main>

          <!-- Detail Modal -->
          ${
            selected
              ? `
              <div class="fixed inset-0 z-[100] flex items-center justify-center p-4 md:p-8">
                <div data-action="close-modal" class="absolute inset-0 bg-black/80 backdrop-blur-sm"></div>

                <div class="relative bg-[#0d1520] w-full max-w-4xl max-h-[90vh] overflow-y-auto rounded-[2.5rem] border border-[#c5a059]/30 shadow-2xl">
                  <button
                    data-action="close-modal"
                    class="absolute top-6 right-6 z-10 bg-black/50 p-2 rounded-full text-white hover:bg-[#c5a059] transition-colors"
                    aria-label="닫기"
                  >
                    <i data-lucide="x" style="width:24px;height:24px"></i>
                  </button>

                  <div class="flex flex-col md:flex-row">
                    <!-- Left: Image & Info -->
                    <div class="md:w-1/2 h-64 md:h-auto relative">
                      <img
                        src="${escapeHtml(selected.image)}"
                        alt="${escapeHtml(selected.name)}"
                        class="w-full h-full object-cover"
                      />
                      <div class="absolute inset-0 bg-gradient-to-t from-[#0d1520] to-transparent"></div>
                      <div class="absolute bottom-6 left-6 right-6">
                        <span class="bg-[#c5a059] text-[#0a192f] text-[10px] font-black px-3 py-1 rounded-full uppercase tracking-widest mb-2 inline-block">
                          ${escapeHtml(selected.type)}
                        </span>
                        <h2 class="text-3xl md:text-4xl font-black text-white">${escapeHtml(selected.name)}</h2>
                      </div>
                    </div>

                    <!-- Right: Detailed Content -->
                    <div class="md:w-1/2 p-8 md:p-12 space-y-8">
                      <div>
                        <h5 class="text-[#c5a059] text-xs font-black tracking-widest uppercase mb-4">Location & Guide</h5>
                        <div class="flex items-start gap-4 bg-slate-900/50 p-5 rounded-2xl border border-slate-800 group hover:border-[#c5a059]/30 transition-all">
                          <i data-lucide="map-pin" class="text-[#c5a059] shrink-0 mt-1" style="width:20px;height:20px"></i>
                          <div class="flex-1">
                            <p class="text-white font-bold mb-1">${escapeHtml(selected.address)}</p>
                            <button
                              data-action="open-map"
                              data-address="${escapeHtml(selected.address)}"
                              class="text-[#c5a059] text-xs font-bold flex items-center gap-1 hover:underline"
                            >
                              카카오맵에서 찾아가기
                              <i data-lucide="external-link" style="width:12px;height:12px"></i>
                            </button>
                          </div>
                        </div>
                      </div>

                      <div>
                        <h5 class="text-[#c5a059] text-xs font-black tracking-widest uppercase mb-4">Description</h5>
                        <p class="text-slate-300 leading-relaxed font-medium">
                          ${escapeHtml(selected.description)}
                        </p>
                      </div>

                      <div>
                        <h5 class="text-[#c5a059] text-xs font-black tracking-widest uppercase mb-4">Local Review</h5>
                        <div class="relative bg-slate-900 p-6 rounded-2xl border-l-4 border-[#c5a059]">
                          <div class="absolute -top-3 -left-1 text-[#c5a059] text-4xl opacity-20">"</div>
                          <p class="text-slate-200 italic font-medium leading-relaxed">
                            ${escapeHtml(selected.review || "")}
                          </p>
                          <div class="mt-4 flex items-center gap-2">
                            <div class="flex gap-1">
                              ${renderStars(selected.rating)}
                            </div>
                            <span class="text-xs text-slate-500 font-bold">Verfied Resident Review</span>
                          </div>
                        </div>
                      </div>

                      <div class="pt-4">
                        <button
                          data-action="close-modal"
                          class="w-full py-5 bg-gradient-to-r from-[#c5a059] to-[#f3d38c] text-[#0a192f] font-black rounded-2xl shadow-xl hover:scale-[1.02] active:scale-[0.98] transition-all"
                        >
                          가이드 닫기
                        </button>
                      </div>
                    </div>
                  </div>
                </div>
              </div>
              `
              : ``
          }

          <!-- Footer -->
          <footer class="bg-[#03070d] border-t border-slate-900 py-20 px-6">
            <div class="max-w-7xl mx-auto flex flex-col md:flex-row justify-between items-center gap-12">
              <div class="text-center md:text-left space-y-4">
                <h2 class="text-3xl font-black text-[#c5a059]">효원(曉原) 미식회</h2>
                <p class="text-slate-500 max-w-md text-sm leading-relaxed font-medium">
                  본 가이드는 부산대학교 학생들과 로컬 주민들의 생생한 리뷰를 바탕으로 큐레이션 되었습니다. 상업적 목적이 아닌 미식 정보 공유를 위해 제작되었습니다.
                </p>
              </div>

              <div class="text-right">
                <div class="flex items-center gap-2 text-slate-500 font-bold mb-4 justify-center md:justify-end">
                  <i data-lucide="navigation" style="width:16px;height:16px"></i>
                  <span>부산광역시 금정구 장전동 일대</span>
                </div>
                <p class="text-slate-600 text-xs">Curated by PNU Gourmet Society</p>
              </div>
            </div>

            <div class="max-w-7xl mx-auto mt-20 pt-8 border-t border-slate-900 text-center text-slate-700 text-xs font-bold tracking-widest uppercase">
              © 2026 Hyo-Won Gourmet Society. Elegance in every bite.
            </div>
          </footer>
        </div>
      `;

      // Lucide 아이콘 렌더
      lucide.createIcons();

      // 검색 input 이벤트 바인딩(렌더 후 다시 잡아야 함)
      const input = document.getElementById("searchInput");
      if (input) {
        input.addEventListener("input", (e) => {
          state.searchTerm = e.target.value;
          // 모달이 열려있으면 검색 시에도 유지/닫기 선택 가능.
          render();
        }, { passive: true });
      }
    }

    // -----------------------------
    // Events (event delegation)
    // -----------------------------
    document.addEventListener("click", (e) => {
      const btn = e.target.closest("[data-action]");
      if (!btn) return;

      const action = btn.getAttribute("data-action");

      if (action === "go-home") {
        window.location.href = "index.html";
        return;
      }

      if (action === "open-detail") {
        const id = Number(btn.getAttribute("data-id"));
        state.selectedId = Number.isFinite(id) ? id : null;
        render();
        return;
      }

      if (action === "close-modal") {
        state.selectedId = null;
        render();
        return;
      }

      if (action === "open-map") {
        const address = btn.getAttribute("data-address") || "";
        handleOpenMap(address);
        return;
      }
    });

    // ESC로 모달 닫기
    document.addEventListener("keydown", (e) => {
      if (e.key === "Escape" && state.selectedId != null) {
        state.selectedId = null;
        render();
      }
    });

    // Initial render
    render();
  </script>
</body>
</html>
